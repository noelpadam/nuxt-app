[build]
  # âœ… Simplification: The "bun --bun run" is generally only needed for
  # the 'dev' command. For 'build', simply running 'bun run nuxt build' 
  # is sufficient when NETLIFY_USE_BUN is true.
  command = "bun install --production && bun run nuxt build"
  
  # default Nuxt 3/4 Nitro output, as 'dist' is often incorrect.
  publish = "dist" 

[functions]
  # CRITICAL: This must point to the directory created by the Nuxt/Nitro 'netlify' preset.
  directory = ".netlify/functions-internal"
  # included_files = ["dist/my_data.sqlite"]
  # included_files = ["my_data.sqlite"]

[build.environment]
  NETLIFY_USE_BUN = "true"
  # NPM_FLAGS = "--ignore-scripts"
  # 5. RECOMMENDED: Pins the Bun version for stable, consistent builds.
  # Replace 1.3.3 with the specific version you develop with locally.
  BUN_VERSION = "1.3.3"
  # Force Node.js version 20 or 22 (LTS is recommended)
  NODE_VERSION = "22"